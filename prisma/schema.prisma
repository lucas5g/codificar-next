generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["referentialIntegrity"]
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model Project {
    id                   Int      @id @default(autoincrement())
    projectIdRedmine     String   @unique
    name                 String   @unique
    slug                 String?  @unique
    channelRocket        String
    qa                   String
    projectIdGitUser     Int
    projectIdGitProvider Int?
    projectIdGitWeb      Int
    createdAt            DateTime @default(now())
    updatedAt            DateTime @default(now()) @updatedAt
    Client               Client[]

    @@map("projects")
}

model Client {
    id               Int      @id @default(autoincrement())
    name             String   @unique
    portal           String
    ios              String
    android          String
    versionWeb       String?
    versionIos       String?
    versionAndroid   String?
    extensionAndroid String   @db.VarChar(5)
    urlUploadAndroid String   @db.VarChar(200)
    status           Boolean  @default(true)
    project          Project  @relation(fields: [projectId], references: [id])
    createdAt        DateTime @default(now())
    updatedAt        DateTime @default(now()) @updatedAt
    projectId        Int

    @@map("clients")
}
